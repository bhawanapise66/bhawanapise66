var headerview,headermap,headercontainer,headercontent,headercloser,headerlayers=[],headeralert=[];function Headermap(e,r){try{headerview=new ol.View({center:ol.proj.fromLonLat(r),maxZoom:19,minZoom:5,zoom:7}),headerlayers.push(new ol.layer.Tile({visible:!1,preload:1/0,source:new ol.source.BingMaps({key:"AqEn-Zmv686dbUmTZMsPBTMSVHaVudrwdc-_nUhYi6yTKwOI97eGxCqsRCxC6N0N",imagerySet:"Road"})})),headerlayers.push(new ol.layer.Tile({visible:!1,preload:1/0,source:new ol.source.BingMaps({key:"AqEn-Zmv686dbUmTZMsPBTMSVHaVudrwdc-_nUhYi6yTKwOI97eGxCqsRCxC6N0N",imagerySet:"AerialWithLabels"})})),headerlayers.push(new ol.layer.Tile({visible:!1,preload:1/0,source:new ol.source.TileWMS({url:"https://api.tomtom.com/map/1/wms/?request=GetMap&srs=EPSG%3A3857&bbox=-0.489%2C51.28%2C0.236%2C51.686&width=512&height=512&format=image%2Fpng&layers=basic&version=1.1.1&key=EMAgQMM0q70KKQlY19lCG95Hz2DZKNOY",transition:0})})),headerlayers.push(new ol.layer.Tile({visible:!0,preload:1/0,source:new ol.source.OSM})),headerlayers.push(new ol.layer.Tile({visible:!1,preload:1/0,extent:[-20037508,-20037508,20037508,20037508],source:new ol.source.TileWMS({url:"http://209.51.202.250:8082/geoserver/wms",type:"base",params:{LAYERS:"IndiaLayer",TILED:!0,CRS:"EPSG:4326"},serverType:"geoserver"})})),headermap=new ol.Map({target:e,loadTilesWhileAnimating:!0,layers:headerlayers,view:headerview});try{var a=new ol.control.ZoomSlider;headermap.addControl(a)}catch(e){}}catch(e){}}function createheadermapopup(){headerpopup=new ol.Overlay({element:headercontainer,autoPan:!0,autoPanAnimation:{duration:250}}),headermap.addOverlay(headerpopup),headercloser.onclick=function(){return headerpopup.setPosition(void 0),headercloser.blur(),!1},headermap.on("click",e=>{headermap.forEachFeatureAtPixel(e.pixel,function(e,r){var a=e.getGeometry().getCoordinates(),t=e.getProperties();if(console.log(t),"live"==(t="features"in t?t.features[0].values_.data:e.getProperties().data).type||"cluster"==t.type){try{var o="<div class='popupMainDiv'><table class='table-striped popCustomTable'><tr></tr>"}catch(e){}for(var l in t)if(t.hasOwnProperty(l))if("title"==l)o=o+"<tr class='tableheader'><td colspan='2' style='text-align:center'>"+t[l]+"</td></tr>";else if("type"!=l){o=o+"<tr><td class='leftTd'>"+l+"</td><td class='rightTd'><span style='color:"+("GPS Status"==l||"Gps Status"==l?"Valid"==t[l]||"VALID"==t[l]?"green":"red":"Status"==l?"Not Connected"==t[l]?"yellow":"Never Connected"==t[l]?"red":"Connected"==t[l]?"green":"red":"")+"'>"+t[l]+"</span></td></tr>"}o+="</table></div>",headercontainer.innerHTML=o,headerpopup.setPosition(a)}})})}function headerSingleMarker(e,r,a){var t=new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform(e,"EPSG:4326","EPSG:3857"))});t.setStyle(function(e,r){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,20],scale:.8,anchorXUnits:"fraction",anchorYUnits:"pixels",src:a}),text:createTextStyle(e,r)})}),t.setProperties(r);var o=new ol.source.Vector({features:[t]}),l=new ol.layer.Vector({source:o});try{headermap.addLayer(l)}catch(e){}headeralert.push(l);try{headerCustomFlyTo(e)}catch(e){}}function getText(e,r){var a=e.getProperties().data,t="";for(var o in a)"Updated At"==o&&(t=t+"\n"+a[o]),"title"==o&&(t=a[o]);return t}function createTextStyle(e,r){var a="6px";if(1/Math.pow(r,1/3)*10+1<4)a="0px";else a="10px";var t="normal "+a+"/1 "+(t="Arial");return new ol.style.Text({textAlign:"center",textBaseline:"middle",font:t,backgroundFill:new ol.style.Fill({color:"white"}),text:getText(e,r),fill:new ol.style.Fill({color:"black"}),stroke:new ol.style.Stroke({color:"black",width:0}),offsetX:50,offsetY:20,placement:"point",maxAngle:.7853981633974483,overflow:"false",rotation:0})}function ClearHeaderalerticon(){for(var e=0;e<headeralert.length;e++)try{headermap.removeLayer(headeralert[e])}catch(e){}headeralert=[]}function HeaderFlyTo(e,r){headerview.getZoom();var a=2,t=!1;headerview.animate({center:e,zoom:20,duration:2e3},{center:e,zoom:20,duration:1e3},function(e){t||0!=--a&&e||(t=!0,r(e))})}function headerCustomFlyTo(e){var r=ol.proj.fromLonLat(e);try{HeaderFlyTo(r,function(){})}catch(e){}}