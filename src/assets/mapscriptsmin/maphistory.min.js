var historyLayer,historyStartEndPoints=[];function HistoryTrack(e){for(var t=[],r=0;r<e.length;r++){var o=ol.proj.fromLonLat(e[r]);t.push(o)}try{FlyTo(t[0],function(){})}catch(e){}var a={LineString:new ol.style.Style({stroke:new ol.style.Stroke({color:"black",width:3})})},n={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:3857"}},features:[{type:"Feature",geometry:{type:"LineString",coordinates:t}}]},i=new ol.source.Vector({features:(new ol.format.GeoJSON).readFeatures(n)});historyLayer=new ol.layer.Vector({source:i,style:function(e){return a[e.getGeometry().getType()]}}),map.addLayer(historyLayer)}function StartEndPoint(e,t,r){var o=new ol.Feature({geometry:new ol.geom.Point(ol.proj.transform(r,"EPSG:4326","EPSG:3857"))});o.setStyle(function(e,r){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,30],scale:1/Math.pow(r,1/3),anchorXUnits:"fraction",anchorYUnits:"pixels",src:t}),text:createTextStyle(e,r)})}),o.setProperties(e);var a=new ol.source.Vector({features:[o]}),n=new ol.layer.Vector({source:a});map.addLayer(n),historyStartEndPoints.push(n)}function ClearHistory(){try{map.removeLayer(historyLayer)}catch(e){alert(e)}for(var e=0;e<historyStartEndPoints.length;e++)try{map.removeLayer(historyStartEndPoints[e])}catch(e){}historyStartEndPoints=[];for(e=0;e<historylayercontional.length;e++)try{map.removeLayer(historylayercontional[e])}catch(e){}historylayercontional=[]}function PlotGeofenceHistory(e){for(var t,r=0;r<e.length;r++)r<e.length-1&&(t=r+1),"0"==e[r].param&&"0"==e[t].param5?GeofenceinLine():"0"==ata[r].param5&&"1"==e[t].param5?GeofenceOutLine():"1"==ata[r].param5&&"1"==e[t].param5?GeofenceOutLine():"1"==ata[r].param5&&"0"==e[t].param5&&GeofenceOutLine()}function GeofenceinLine(e){}function GeofenceOutLine(){}